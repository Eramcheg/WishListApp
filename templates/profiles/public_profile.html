{% extends "base.html" %}

{% block content %}
{{ profile }}
<div class="max-w-6xl mx-auto py-10 space-y-8">

  <!-- Header профиля -->
  <header class="rounded-2xl border bg-card/80 backdrop-blur-sm p-6 shadow-sm flex gap-4">
    <!-- Аватар -->
    <div class="relative h-16 w-16 rounded-full overflow-hidden bg-muted flex items-center justify-center text-2xl">
      {% if profile.avatar %}
        <img
          src="{{ profile.avatar.url }}"
          alt="{{ profile.display_name }} avatar"
          class="h-full w-full object-cover"
        >
      {% else %}
        <span>
          {% if profile.icon %}
              <i data-lucide="{{ profile.icon }}" class="w-10 h-10"></i>
          {% else %}
            {{ profile.user.username|first|upper }}
          {% endif %}
        </span>
      {% endif %}
    </div>

    <div class="flex-1 space-y-2">
      <div class="flex items-center gap-2">
        <span class="text-xl font-semibold">
          {{ profile.display_name }}
        </span>
      </div>

      <p class="text-base text-muted-foreground">
        @{{ profile.user.username }}
      </p>

      {% if profile.bio %}
        <p class="text-sm leading-relaxed mt-1">
          {{ profile.bio }}
        </p>
      {% else %}
        <p class="text-sm text-muted-foreground/80 italic mt-1">
          This user hasn’t written a bio yet.
        </p>
      {% endif %}

      <div class="flex flex-wrap gap-3 text-xs text-muted-foreground mt-3">
        <span>
          Member since {{ profile.user.date_joined|date:"F Y" }}
        </span>

        {% with bday=profile.get_public_birthdate_display %}
          {% if bday %}
            <span>•</span>
            <span>Birthday: {{ bday }}</span>
          {% endif %}
        {% endwith %}
      </div>
    </div>
  </header>

  <section class="rounded-2xl bg-card p-5 text-sm text-muted-foreground space-y-2">
    <h2 class="text-xs font-semibold uppercase tracking-wide text-muted-foreground/80">
      About
    </h2>
    <p>
      Public wishlists and activity will appear here later.
    </p>
  </section>

  <!-- Секция для будущих публичных вишлистов -->
  <section class="rounded-2xl bg-card p-5">
    <div class="flex items-center justify-between mb-3">
      <h2 class="text-sm font-medium">Public wishlists</h2>
      {# позже можно добавить “View all” #}
    </div>

      <ul
          id="tile-grid"
          class="grid gap-3 sm:grid-cols-2 lg:grid-cols-3"
          aria-busy="false"
        >
          {% for wl in public_wishlists %}
            {% url 'public_wl_detail' wl.slug as wl_url %}
                <li>
                  {% include "partials/card_tile.html" with href=wl_url redirect_show_btn=True title_link=True icon=wl.icon title=wl.title subtitle=wl.description|default:"No description yet" %}
                </li>
          {% empty %}
            {% include "partials/empty_state.html" with page_type='public_profile' %}
          {% endfor %}
        </ul>
  </section>

</div>
{% endblock %}
